<div ng-controller="favoritosCtrl" class="container p-3">

  <h3>Favoritos</h3>

  <!-- Formulario para agregar -->
  <div class="mb-3">
    <label>Agregar favorito (targetId)</label>
    <div class="input-group">
      <input type="text" class="form-control" ng-model="nuevo.targetId" placeholder="id de playlist o canción">

      <select class="form-select" ng-model="nuevo.type">
        <option value="playlist">Playlist</option>
        <option value="song">Canción</option>
        <option value="album">Álbum</option>
      </select>

      <button class="btn btn-primary" ng-click="agregar()">Agregar</button>
    </div>
  </div>

  <!-- Si no hay datos -->
  <div ng-if="!favoritos.length">No hay favoritos</div>

  <!-- Listado -->
  <div class="list-group">
    <div class="list-group-item" ng-repeat="f in favoritos track by f.id">

      <div class="d-flex justify-content-between align-items-center">

        <div>
          <strong ng-bind="f.type"></strong> — ID:
          <span ng-bind="f.target_id || f.targetId"></span>

          <div class="small text-muted">
            Creado: <span ng-bind="f.created_at"></span>
          </div>
        </div>

        <div>
          <select ng-model="f.tipoTemporal" ng-init="f.tipoTemporal=f.type">
            <option value="playlist">Playlist</option>
            <option value="song">Canción</option>
            <option value="album">Álbum</option>
          </select>

          <button class="btn btn-sm btn-secondary"
                  ng-click="actualizarTipo(f, f.tipoTemporal)">
            Actualizar
          </button>

          <button class="btn btn-sm btn-danger"
                  ng-click="eliminar(f)">
            Eliminar
          </button>
        </div>

      </div>

    </div>
  </div>

</div>
